<!-- 
      Spectrum.html
      A custom element color picker with an API to get and set color of the
      color picker. 
-->

<!-- Color Picker Dependencies -->
<script type="text/javascript" src="utilities.js"></script>
<script type="text/javascript" src="common/WebInspector.js"></script>
<script type="text/javascript" src="common/Object.js"></script>
<script type="text/javascript" src="common/UIString.js"></script>
<script type="text/javascript" src="common/ParsedURL.js"></script>
<script type="text/javascript" src="common/Color.js"></script>
<script type="text/javascript" src="common/Geometry.js"></script>
<script type="text/javascript" src="common/DOMExtension.js"></script>
<script type="text/javascript" src="ui/SettingsUI.js"></script>
<script type="text/javascript" src="main/Main.js"></script>
<script type="text/javascript" src="ui/View.js"></script>
<script type="text/javascript" src="ui/UIUtils.js"></script>
<script type="text/javascript" src="InspectorFrontendHostStub.js"></script>
<!-- Popover: modified -->
<script type="text/javascript" src="Popover.js"></script>
<script type="text/javascript" src="components/InspectorView.js"></script>
<script type="text/javascript" src="ui/Dialog.js"></script>

<!-- Color Picker Module -->
<script type="text/javascript" src="./ColorPicker.js"></script>

<template id="spectrum-swatch-template">
<style>
@import url("spectrum.css")
</style>
<nobr>
<span title="Mouseover txt..." class="swatch">
  <span class="swatch-inner" style="background-color: rgb(22, 26, 34);"></span>
</span>
<span>#161a22</span>
</nobr>
</template>

<template id="spectrum-popover-template">
<style>
@import url("spectrum.css")
</style>
</template>

<template id="color-picker-template">
<style>
@import url("spectrum.css")
</style>
</template>

<script>
var importDoc = document.currentScript.ownerDocument;

// The color picker
var colorPickerPrototype = Object.create(HTMLElement.prototype, {
  createdCallback: {
    value: function() {
      var t = importDoc.querySelector('#color-picker-template');
      var clone = document.importNode(t.content, true);
      var root = this.createShadowRoot(); 

      root.appendChild(clone);

      if (this.hasAttribute('color')) {
        this.color = this.getAttribute('color'); 
      } else {
        this.color = '#FFFFFF';
        this.setAttribute('color', this.color);
      }

      root.appendChild(processColor(this));

      console.log('Successfully stamped out color-picker!');
    }
  }
});
document.registerElement('color-picker', {prototype: colorPickerPrototype});

// The swatch
var spectrumSwatchPrototype = Object.create(HTMLElement.prototype, {
  createdCallback: {
    value: function() {
      var t = importDoc.querySelector('#spectrum-swatch-template');
      var clone = document.importNode(t.content, true);
      var root = this.createShadowRoot(); 
      root.appendChild(clone);

      console.log('Successfully stamped out spectrum-swatch!');
    }
  }
});
document.registerElement('spectrum-swatch', {prototype:
                         spectrumSwatchPrototype});

// The popover
var spectrumPopoverPrototype = Object.create(HTMLElement.prototype, {
  createdCallback: {
    value: function() {
      var t = importDoc.querySelector('#spectrum-popover-template');
      var clone = document.importNode(t.content, true);
      var root = this.createShadowRoot(); 
      root.appendChild(clone);

      this.Spectrum = new Spectrum();
      root.appendChild(this.Spectrum.element);

      console.log('Successfully stamped out spectrum-popover!');
    }
  }
});
document.registerElement('spectrum-popover', {prototype: spectrumPopoverPrototype});

</script>
